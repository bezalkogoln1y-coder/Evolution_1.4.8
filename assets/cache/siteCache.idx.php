<?php
$c=&$this->config;$c['settings_version']="1.4.8";$c['manager_theme']="default";$c['server_offset_time']="0";$c['manager_language']="russian-UTF8";$c['modx_charset']="UTF-8";$c['site_name']="Мой сайт";$c['site_start']="1";$c['error_page']="1";$c['unauthorized_page']="1";$c['site_status']="1";$c['auto_template_logic']="parent";$c['default_template']="3";$c['old_template']="3";$c['publish_default']="1";$c['friendly_urls']="1";$c['friendly_alias_urls']="1";$c['use_alias_path']="1";$c['cache_type']="2";$c['failed_login_attempts']="3";$c['blocked_minutes']="60";$c['use_captcha']="0";$c['emailsender']="dilectum@yandex.ru";$c['use_editor']="1";$c['use_browser']="1";$c['fe_editor_lang']="russian-UTF8";$c['fck_editor_toolbar']="standard";$c['fck_editor_autolang']="0";$c['editor_css_path']="";$c['editor_css_selectors']="";$c['upload_maxsize']="10485760";$c['manager_layout']="4";$c['auto_menuindex']="1";$c['session.cookie.lifetime']="604800";$c['mail_check_timeperiod']="600";$c['manager_direction']="ltr";$c['xhtml_urls']="0";$c['automatic_alias']="1";$c['datetime_format']="dd-mm-YYYY";$c['warning_visibility']="0";$c['remember_last_tab']="1";$c['enable_bindings']="1";$c['seostrict']="1";$c['number_of_results']="30";$c['theme_refresher']="";$c['show_picker']="0";$c['show_newresource_btn']="0";$c['show_fullscreen_btn']="0";$c['email_sender_method']="1";$c['site_id']="5d9d9d3169dc0";$c['a']="30";$c['site_unavailable_page']="";$c['reload_site_unavailable']="";$c['site_unavailable_message']="В настоящее время сайт недоступен.";$c['siteunavailable_message_default']="В настоящее время сайт недоступен.";$c['chunk_processor']="";$c['enable_mootools']="1";$c['enable_at_syntax']="0";$c['enable_filter']="0";$c['cache_default']="1";$c['search_default']="1";$c['custom_contenttype']="application/rss+xml,application/pdf,application/vnd.ms-word,application/vnd.ms-excel,text/html,text/css,text/xml,text/javascript,text/plain,application/json";$c['docid_incrmnt_method']="0";$c['enable_cache']="1";$c['minifyphp_incache']="0";$c['server_protocol']="http";$c['rss_url_news']="http://feeds.feedburner.com/evocms-release-news";$c['track_visitors']="0";$c['friendly_url_prefix']="";$c['friendly_url_suffix']=".html";$c['make_folders']="0";$c['aliaslistingfolder']="0";$c['allow_duplicate_alias']="0";$c['use_udperms']="1";$c['udperms_allowroot']="0";$c['email_method']="mail";$c['smtp_auth']="0";$c['smtp_secure']="none";$c['smtp_host']="smtp.example.com";$c['smtp_port']="25";$c['smtp_username']="you@example.com";$c['reload_emailsubject']="";$c['emailsubject']="Данные для авторизации";$c['emailsubject_default']="Данные для авторизации";$c['reload_signupemail_message']="";$c['signupemail_message']="Здравствуйте, [+uid+]!\r\n\r\nВаши данные для авторизации в системе управления сайтом [+sname+]:\r\n\r\nИмя пользователя: [+uid+]\r\nПароль: [+pwd+]\r\n\r\nПосле успешной авторизации в системе управления сайтом ([+surl+]), вы сможете изменить свой пароль.\r\n\r\nС уважением, Администрация";$c['system_email_signup_default']="Здравствуйте, [+uid+]!\r\n\r\nВаши данные для авторизации в системе управления сайтом [+sname+]:\r\n\r\nИмя пользователя: [+uid+]\r\nПароль: [+pwd+]\r\n\r\nПосле успешной авторизации в системе управления сайтом ([+surl+]), вы сможете изменить свой пароль.\r\n\r\nС уважением, Администрация";$c['reload_websignupemail_message']="";$c['websignupemail_message']="Здравствуйте, [+uid+]!\r\n\r\nВаши данные для авторизации на [+sname+]:\r\n\r\nИмя пользователя: [+uid+]\r\nПароль: [+pwd+]\r\n\r\nПосле успешной авторизации на [+sname+] ([+surl+]), вы сможете изменить свой пароль.\r\n\r\nС уважением, Администрация";$c['system_email_websignup_default']="Здравствуйте, [+uid+]!\r\n\r\nВаши данные для авторизации на [+sname+]:\r\n\r\nИмя пользователя: [+uid+]\r\nПароль: [+pwd+]\r\n\r\nПосле успешной авторизации на [+sname+] ([+surl+]), вы сможете изменить свой пароль.\r\n\r\nС уважением, Администрация";$c['reload_system_email_webreminder_message']="";$c['webpwdreminder_message']="Здравствуйте, [+uid+]!\r\n\r\nЧтобы активировать ваш новый пароль, перейдите по следующей ссылке:\r\n\r\n[+surl+]\r\n\r\nПозже вы сможете использовать следующий пароль для авторизации: [+pwd+]\r\n\r\nЕсли это письмо пришло к вам по ошибке, пожалуйста, проигнорируйте его.\r\n\r\nС уважением, Администрация";$c['system_email_webreminder_default']="Здравствуйте, [+uid+]!\r\n\r\nЧтобы активировать ваш новый пароль, перейдите по следующей ссылке:\r\n\r\n[+surl+]\r\n\r\nПозже вы сможете использовать следующий пароль для авторизации: [+pwd+]\r\n\r\nЕсли это письмо пришло к вам по ошибке, пожалуйста, проигнорируйте его.\r\n\r\nС уважением, Администрация";$c['manager_theme_mode']="3";$c['login_logo']="";$c['login_bg']="";$c['login_form_position']="left";$c['login_form_style']="dark";$c['manager_menu_position']="top";$c['tree_page_click']="27";$c['use_breadcrumbs']="0";$c['global_tabs']="1";$c['group_tvs']="0";$c['resource_tree_node_name']="pagetitle";$c['session_timeout']="15";$c['tree_show_protected']="0";$c['datepicker_offset']="-10";$c['number_of_logs']="100";$c['number_of_messages']="40";$c['which_editor']="TinyMCE4";$c['tinymce4_theme']="custom";$c['tinymce4_skin']="lightgray";$c['tinymce4_skintheme']="inlite";$c['tinymce4_template_docs']="";$c['tinymce4_template_chunks']="";$c['tinymce4_entermode']="p";$c['tinymce4_element_format']="xhtml";$c['tinymce4_schema']="html5";$c['tinymce4_custom_plugins']="advlist autolink lists link image charmap print preview hr anchor pagebreak searchreplace wordcount visualblocks visualchars code fullscreen spellchecker insertdatetime media nonbreaking save table contextmenu directionality emoticons template paste textcolor codesample colorpicker textpattern imagetools paste modxlink youtube";$c['tinymce4_custom_buttons1']="undo redo | cut copy paste | searchreplace | bold italic underline strikethrough | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent blockquote | styleselect";$c['tinymce4_custom_buttons2']="link unlink anchor image media codesample table | hr removeformat | subscript superscript charmap | nonbreaking | visualchars visualblocks print preview fullscreen code formatselect";$c['tinymce4_custom_buttons3']="";$c['tinymce4_custom_buttons4']="";$c['tinymce4_blockFormats']="Paragraph=p;Header 1=h1;Header 2=h2;Header 3=h3";$c['allow_eval']="with_scan";$c['safe_functions_at_eval']="time,date,strtotime,strftime";$c['check_files_onlogin']="index.php\r\n.htaccess\r\nmanager/index.php\r\nmanager/includes/config.inc.php";$c['validate_referer']="1";$c['rss_url_security']="http://feeds.feedburner.com/evocms-security-news";$c['error_reporting']="1";$c['send_errormail']="0";$c['pwd_hash_algo']="UNCRYPT";$c['reload_captcha_words']="";$c['captcha_words']="EVO,Access,Better,BitCode,Chunk,Cache,Desc,Design,Excell,Enjoy,URLs,TechView,Gerald,Griff,Humphrey,Holiday,Intel,Integration,Joystick,Join(),Oscope,Genetic,Light,Likeness,Marit,Maaike,Niche,Netherlands,Ordinance,Oscillo,Parser,Phusion,Query,Question,Regalia,Righteous,Snippet,Sentinel,Template,Thespian,Unity,Enterprise,Verily,Tattoo,Veri,Website,WideWeb,Yap,Yellow,Zebra,Zygote";$c['captcha_words_default']="EVO,Access,Better,BitCode,Chunk,Cache,Desc,Design,Excell,Enjoy,URLs,TechView,Gerald,Griff,Humphrey,Holiday,Intel,Integration,Joystick,Join(),Oscope,Genetic,Light,Likeness,Marit,Maaike,Niche,Netherlands,Ordinance,Oscillo,Parser,Phusion,Query,Question,Regalia,Righteous,Snippet,Sentinel,Template,Thespian,Unity,Enterprise,Verily,Tattoo,Veri,Website,WideWeb,Yap,Yellow,Zebra,Zygote";$c['filemanager_path']="W:/domains/jelezo.local/";$c['upload_files']="bmp,ico,gif,jpeg,jpg,png,psd,tif,tiff,fla,flv,swf,aac,au,avi,css,cache,doc,docx,gz,gzip,htaccess,htm,html,js,mp3,mp4,mpeg,mpg,ods,odp,odt,pdf,ppt,pptx,rar,tar,tgz,txt,wav,wmv,xls,xlsx,xml,z,zip,JPG,JPEG,PNG,GIF,svg,tpl";$c['upload_images']="bmp,ico,gif,jpeg,jpg,png,psd,tif,tiff,svg";$c['upload_media']="au,avi,mp3,mp4,mpeg,mpg,wav,wmv";$c['upload_flash']="fla,flv,swf";$c['new_file_permissions']="0644";$c['new_folder_permissions']="0755";$c['which_browser']="mcpuk";$c['rb_webuser']="0";$c['rb_base_dir']="W:/domains/jelezo.local/assets/";$c['rb_base_url']="assets/";$c['clean_uploaded_filename']="1";$c['strip_image_paths']="1";$c['maxImageWidth']="2600";$c['maxImageHeight']="2200";$c['clientResize']="0";$c['noThumbnailsRecreation']="0";$c['thumbWidth']="150";$c['thumbHeight']="150";$c['thumbsDir']=".thumbs";$c['jpegQuality']="90";$c['denyZipDownload']="0";$c['denyExtensionRename']="0";$c['showHiddenFiles']="0";$c['lang_code']="ru";$c['sys_files_checksum']="a:4:{s:33:\"W:/domains/jelezo.local/index.php\";s:32:\"2f6a89952c4b21dd233f0dcb2408d3e7\";s:33:\"W:/domains/jelezo.local/.htaccess\";s:32:\"b12739e14a9d18d7090427db01bd4021\";s:41:\"W:/domains/jelezo.local/manager/index.php\";s:32:\"89262755b0e2b7ca727e59ba268f0c33\";s:55:\"W:/domains/jelezo.local/manager/includes/config.inc.php\";s:32:\"50ec2ffdba8e4b9ea1d3671dd7e70ff3\";}";$this->aliasListing=array();$a=&$this->aliasListing;$d=&$this->documentListing;$m=&$this->documentMap;$a[1]=array('id'=>1,'alias'=>'glavnaya','path'=>'','parent'=>0,'isfolder'=>0,'alias_visible'=>1);$d['glavnaya']=1;$m[]=array(0=>1);$c=&$this->contentTypes;$c=&$this->chunkCache;$c['page_meta_head']='<meta charset="UTF-8">
<title>[[if? &is=`[*id*]:=:1` &then=`[*longtitle*]` &else=`[*pagetitle*]`]]</title>
<meta name="keywords" content="[*keyw*]" />
<meta name="description" content="[*desc*]" />
<base href="[(site_url)]"/>
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">';$c['mm_rules']='// more example rules are in assets/plugins/managermanager/example_mm_rules.inc.php
// example of how PHP is allowed - check that a TV named documentTags exists before creating rule

if ($modx->db->getValue($modx->db->select(\'count(id)\', $modx->getFullTableName(\'site_tmplvars\'), "name=\'documentTags\'"))) {
	mm_widget_tags(\'documentTags\', \' \'); // Give blog tag editing capabilities to the \'documentTags (3)\' TV
}
mm_widget_showimagetvs(); // Always give a preview of Image TVs

mm_createTab(\'SEO\', \'seo\', \'\', \'\', \'\', \'\');
mm_moveFieldsToTab(\'titl,keyw,desc,seoOverride,noIndex,sitemap_changefreq,sitemap_priority,sitemap_exclude\', \'seo\', \'\', \'\');
mm_widget_tags(\'keyw\',\',\'); // Give blog tag editing capabilities to the \'documentTags (3)\' TV


//mm_createTab(\'Images\', \'photos\', \'\', \'\', \'\', \'850\');
//mm_moveFieldsToTab(\'images,photos\', \'photos\', \'\', \'\');

//mm_hideFields(\'longtitle,description,link_attributes,menutitle,content\', \'\', \'6,7\');

//mm_hideTemplates(\'0,5,8,9,11,12\', \'2,3\');

//mm_hideTabs(\'settings, access\', \'2\');
';$s=&$this->snippetCache;$s['DLCrumbs']='return require MODX_BASE_PATH.\'assets/snippets/DocLister/snippet.DLCrumbs.php\';';$s['DLMenu']='return require MODX_BASE_PATH.\'assets/snippets/DocLister/snippet.DLMenu.php\';';$s['DLSitemap']='return require MODX_BASE_PATH.\'assets/snippets/DocLister/snippet.DLSitemap.php\';';$s['DocInfo']='return require MODX_BASE_PATH.\'assets/snippets/docinfo/snippet.docinfo.php\';';$s['DocLister']='return require MODX_BASE_PATH.\'assets/snippets/DocLister/snippet.DocLister.php\';';$s['FormLister']='return require MODX_BASE_PATH.\'assets/snippets/FormLister/snippet.FormLister.php\';';$s['if']='return require MODX_BASE_PATH.\'assets/snippets/if/snippet.if.php\';';$s['phpthumb']='return require MODX_BASE_PATH.\'assets/snippets/phpthumb/snippet.phpthumb.php\';';$s['summary']='return require MODX_BASE_PATH.\'assets/snippets/summary/snippet.summary.php\';';$s['ddGetMultipleField']='<?php
/**
 * ddGetMultipleField
 * @version 3.4 (2018-11-14)
 * 
 * @desc A snippet for processing, manipulations and custom output structured data (JSON or separated by delimiters strings).
 * @note The fields formed by the “mm_ddMultipleFields” widget values output gets more convinient with the snippet.
 * 
 * @uses PHP >= 5.4.
 * @uses MODXEvo >= 1.1.
 * @uses MODXEvo.libraries.ddTools >= 0.18.
 * @uses MODXEvo.snippets.ddTypograph >= 1.4.3 (if typography is required).
 * 
 * @param $inputString {stirng_json|string_separated} — The input string containing values in JSON (https://en.wikipedia.org/wiki/JSON) or separated by “$inputString_rowDelimiter” and “$inputString_colDelimiter”. @required
 * @param $inputString_docField {string} — The name of the document field/TV which value is required to get. If the parameter is passed then the input string will be taken from the field/TV and “inputString” will be ignored. Default: —.
 * @param $inputString_docId {integer} — ID of the document which field/TV value is required to get. “inputString_docId” equals the current document id since “inputString_docId” is unset. Default: —.
 * @param $inputString_rowDelimiter {string|regexp} — The input string row delimiter (if not JSON). Default: \'||\'.
 * @param $inputString_colDelimiter {string|regexp} — The input string column delimiter (if not JSON). Default: \'::\'.
 * @param $startRow {integer} — The index of the initial row (indexes start at 0). Default: 0.
 * @param $totalRows {integer|\'all\'} — The maximum number of rows to return. All rows will be returned if “totalRows” == \'all\'. Default: \'all\'.
 * @param $columns {string_commaSeparated|\'all\'} — The indexes of columns to return (indexes start at 0). All columns will be returned if “columns” == \'all\'. Default: \'all\'.
 * @param $filter {string_separated} — Filter clause for columns. Thus, \'0::a||0::b||1::1\' makes the columns with either \'a\' or \'b\' in the 0 column and with 1 in the 1 column to be returned. Default: \'\'.
 * @param $removeEmptyRows {0|1} — Is it required to remove empty rows? Default: 1.
 * @param $removeEmptyCols {0|1} — Is it required to remove empty columns? Default: 1.
 * @param $sortBy {string_commaSeparated} — The index of the column to sort by (indexes start at 0). The parameter also takes comma-separated values for multiple sort, e.g. \'0,1\'. Default: \'0\'.
 * @param $sortDir {\'ASC\'|\'DESC\'|\'RAND\'|\'REVERSE\'|\'\'} — Rows sorting direction. The rows will be returned in reversed order if “sortDir” == \'REVERSE\'. Default: \'\'.
 * @param $typography {string_commaSeparated} — The comma separated indexes of the columns which values have to be corrected (indexes start at 0). If unset, there will be no correction. Default: —.
 * @param $outputFormat {\'html\'|\'JSON\'|\'array\'|\'htmlarray\'} — Result output format. Default: \'html\'.
 * @param $rowGlue {string} — The string that combines rows while rendering. It can be used along with “rowTpl”. Default: \'\'.
 * @param $colGlue {string} — The string that combines columns while rendering. It can be used along with “colTpl”, but not with “rowTpl” for obvious reasons. Default: \'\'.
 * @param $rowTpl {string_chunkName|string} — The template for row rendering (“outputFormat” has to be == \'html\'). Use inline templates starting with “@CODE:”. Available placeholders: [+rowNumber+] (index of current row, starts at 1), [+rowNumber.zeroBased+] (index of current row, starts at 0), [+total+] (total number of rows), [+resultTotal+] (total number of returned rows), [+col0+],[+col1+],… (column values). Default: \'\'.
 * @param $colTpl {string_commaSeparated_chunkName|string|\'null\'} — The comma-separated list of templates for column rendering (“outputFormat” has to be == \'html\'). Use inline templates starting with “@CODE:”. If the number of templates is lesser than the number of columns then the last passed template will be used to render the rest of the columns. \'null\' specifies rendering without a template. Available placeholders: [+val+], [+rowNumber+] (index of current row, starts at 1), [+rowNumber.zeroBased+] (index of current row, starts at 0). Default: \'\'.
 * @param $outerTpl {string_chunkName|string} — Wrapper template (“outputFormat” has to be != \'array\'). Use inline templates starting with “@CODE:”. Available placeholders: [+result+], [+total+] (total number of rows), [+resultTotal+] (total number of returned rows), [+rowY.colX+] (“Y” — row number, “X” — column number). Default: \'\'.
 * @param $placeholders {stirng_json|string_queryFormated} — Additional data as JSON (https://en.wikipedia.org/wiki/JSON) or Query string (https://en.wikipedia.org/wiki/Query_string) has to be passed into “outerTpl”, “rowTpl” and “colTpl”. E. g. `{"pladeholder1": "value1", "pagetitle": "My awesome pagetitle!"}` or `pladeholder1=value1&pagetitle=My awesome pagetitle!`. Arrays are supported too: “some[a]=one&some[b]=two” => “[+some.a+]”, “[+some.b+]”; “some[]=one&some[]=two” => “[+some.0+]”, “[some.1]”. Default: \'\'.
 * @param $urlencode {0|1} — Is it required to URL encode the result? “outputFormat” has to be != \'array\'. URL encoding is used according to RFC 3986. Default: 0.
 * @param $totalRowsToPlaceholder {string} — The name of the global MODX placeholder that holds the total number of rows. The placeholder won\'t be set if “totalRowsToPlaceholder” is empty. Default: \'\'.
 * @param $resultToPlaceholder {string} — The name of the global MODX placeholder that holds the snippet result. The result will be returned in a regular manner if the parameter is empty. Default: \'\'.
 * 
 * @link http://code.divandesign.biz/modx/ddgetmultiplefield/3.4
 * 
 * @copyright 2009–2018 DivanDesign {@link http://www.DivanDesign.biz }
 */

$ddToolsPath = $modx->getConfig(\'base_path\').\'assets/libs/ddTools/modx.ddtools.class.php\';

if (!file_exists($ddToolsPath)){
	$ddToolsPath = str_replace(
		\'assets/libs/\',
		\'assets/snippets/\',
		$ddToolsPath
	);
	$modx->logEvent(
		1,
		2,
		\'<p>Please update the “<a href="http://code.divandesign.biz/modx/ddtools">modx.ddTools</a>” library.</p><p>The snippet has been called in the document with id \'.$modx->documentIdentifier.\'.</p>\',
		$modx->currentSnippet
	);
}

//Подключаем modx.ddTools
require_once $ddToolsPath;

//Для обратной совместимости
extract(ddTools::verifyRenamedParams(
	$params,
	[
		\'inputString\' => \'string\',
		\'inputString_docField\' => \'docField\',
		\'inputString_docId\' => \'docId\',
		\'inputString_rowDelimiter\' => \'rowDelimiter\',
		\'inputString_colDelimiter\' => \'colDelimiter\'
	]
));

//Если задано имя поля, которое необходимо получить
if (isset($inputString_docField)){
	$inputString = ddTools::getTemplateVarOutput(
		[$inputString_docField],
		$inputString_docId
	);
	$inputString = $inputString[$inputString_docField];
}

$result = \'\';

//Если задано значение поля
if (
	isset($inputString) &&
	strlen($inputString) > 0
){
	if (!isset($inputString_rowDelimiter)){$inputString_rowDelimiter = \'||\';}
	if (!isset($inputString_colDelimiter)){$inputString_colDelimiter = \'::\';}
	
	//Являются ли разделители регулярками
	$inputString_rowDelimiterIsRegexp = (filter_var(
		$inputString_rowDelimiter,
		FILTER_VALIDATE_REGEXP,
		[\'options\' => [\'regexp\' => \'/^\\/.*\\/[a-z]*$/\']]
	) !== false) ? true : false;
	
	$inputString_colDelimiterIsRegexp = (filter_var(
		$inputString_colDelimiter,
		FILTER_VALIDATE_REGEXP,
		[\'options\' => [\'regexp\' => \'/^\\/.*\\/[a-z]*$/\']]
	) !== false) ? true : false;
	
	//Если заданы условия фильтрации
	if (isset($filter)){
		//Разбиваем по условиям
		$temp = explode(
			\'||\',
			$filter
		);
		
		$filter = [];
		
		foreach ($temp as $value){
			//Разбиваем по колонке/значению
			$value = explode(
				\'::\',
				$value
			);
			
			//Если указали просто значение (значит, это нулевая колонка) TODO: Удалить через пару версий.
			if (count($value) < 2){
				$value[1] = $value[0];
				$value[0] = \'0\';
			}
			
			//Если ни одно правило для этой колонки ещй не задано
			if (!isset($filter[$value[0]])){
				$filter[$value[0]] = [];
			}
			
			//Добавляем правило для соответствующей колонки
			$filter[$value[0]][] = $value[1];
		}
	}else{
		$filter = false;
	}
	
	$columns = isset($columns) ? explode(
		\',\',
		$columns
	) : \'all\';
	//Хитро-мудро для array_intersect_key
	if (is_array($columns)){
		$columns = array_combine(
			$columns,
			$columns
		);
	}
	if (!isset($rowGlue)){$rowGlue = \'\';}
	if (!isset($colGlue)){$colGlue = \'\';}
	$removeEmptyRows = (
		isset($removeEmptyRows) &&
		$removeEmptyRows == \'0\'
	) ? false : true;
	$removeEmptyCols = (
		isset($removeEmptyCols) &&
		$removeEmptyCols == \'0\'
	) ? false : true;
	$urlencode = (
		isset($urlencode) &&
		$urlencode == \'1\'
	) ? true : false;
	$outputFormat = isset($outputFormat) ? strtolower($outputFormat) : \'html\';
	
	//JSON
	if (substr(
		ltrim($inputString),
		0,
		1
	) == \'[\'){
		try {
			$data = json_decode(
				$inputString,
				true
			);
		}catch (\\Exception $e){
			//Flag
			$data = [];
		}
	}
	//Not JSON
	if (empty($data)){
		//Разбиваем на строки
		$data = $inputString_rowDelimiterIsRegexp ? preg_split(
			$inputString_rowDelimiter,
			$inputString
		) : explode(
			$inputString_rowDelimiter,
			$inputString
		);
	}
	
	//Общее количество строк
	$total = count($data);
	
	//Перебираем строки, разбиваем на колонки
	foreach (
		$data as
		$rowNumber => $row
	){
		if (!is_array($row)){
			$data[$rowNumber] = $inputString_colDelimiterIsRegexp ? preg_split(
				$inputString_colDelimiter,
				$row
			) : explode(
				$inputString_colDelimiter,
				$row
			);
		}
		
		//Если необходимо получить какие-то конкретные значения
		if ($filter !== false){
			//Перебираем колонки для фильтрации
			foreach (
				$filter as
				$columnNumber => $value
			){
				//Если текущего значения в списке нет, сносим нафиг
				if (!in_array(
					$data[$rowNumber][$columnNumber],
					$value
				)){
					unset($data[$rowNumber]);
					
					//Уходим (строку уже снесли, больше ничего не важно)
					break;
				}
			}
		}
		
		//Если нужно получить какую-то конкретную колонку
		if (
			$columns != \'all\' &&
			//Также проверяем на то, что строка вообще существует, т.к. она могла быть уже удалена ранее
			isset($data[$rowNumber])
		){
			//Выбираем только необходимые колонки + Сбрасываем ключи массива
			$data[$rowNumber] = array_values(array_intersect_key(
				$data[$rowNumber],
				$columns
			));
		}
		
		//Если нужно удалять пустые строки
		if (
			$removeEmptyRows &&
			//Также проверяем на то, что строка вообще существует, т.к. она могла быть уже удалена ранее
			isset($data[$rowNumber])
		){
			//Если строка пустая, удаляем
			if (strlen(implode(
				\'\',
				$data[$rowNumber]
			)) == 0){
				unset($data[$rowNumber]);
			}
		}
	}
	
	//Сбрасываем ключи массива (пригодится для выборки конкретного значения)
	$data = array_values($data);
	
	//Если что-то есть (могло ничего не остаться после удаления пустых и/или получения по значениям)
	if (count($data) > 0){
		//Если надо сортировать
		if (isset($sortDir)){
			$sortDir = strtoupper($sortDir);
			
			if (!isset($sortBy)){$sortBy = \'0\';}
			
			//Если надо в случайном порядке - шафлим
			if ($sortDir == \'RAND\'){
				shuffle($data);
			//Если надо просто в обратном порядке
			}else if ($sortDir == \'REVERSE\'){
				$data = array_reverse($data);
			}else{
				//Сортируем результаты
				$data = ddTools::sort2dArray(
					$data,
					explode(
						\',\',
						$sortBy
					),
					($sortDir == \'ASC\') ? 1 : -1
				);
			}
		}
		
		if (
			!isset($startRow) ||
			!is_numeric($startRow)
		){
			$startRow = \'0\';
		}
		
		//Обрабатываем слишком большой индекс
		if (!isset($data[$startRow])){$startRow = count($data) - 1;}
		
		//Если общее количество элементов не задано или задано плохо, читаем, что нужны все
		if (
			!isset($totalRows) ||
			!is_numeric($totalRows)
		){
			$totalRows = \'all\';
		}
		
		//Если нужны все элементы
		if ($totalRows == \'all\'){
			$data = array_slice(
				$data,
				$startRow
			);
		}else{
			$data = array_slice(
				$data,
				$startRow,
				$totalRows
			);
		}
		
		//Общее количество возвращаемых строк
		$resultTotal = count($data);
		
		//Плэйсхолдер с общим количеством
		if (isset($totalRowsToPlaceholder)){
			$modx->setPlaceholder(
				$totalRowsToPlaceholder,
				$resultTotal
			);
		}
		
		//Если нужно типографировать
		if (isset($typography)){
			$typography = explode(
				\',\',
				$typography
			);
			
			//Придётся ещё раз перебрать результат
			foreach (
				$data as
				$rowNumber => $row
			){
				//Перебираем колонки, заданные для типографирования
				foreach ($typography as $v){
					//Если такая колонка существует, типографируем
					if (isset($data[$rowNumber][$v])){
						$data[$rowNumber][$v] = $modx->runSnippet(
							\'ddTypograph\',
							[\'text\' => $data[$rowNumber][$v]]
						);
					}
				}
			}
		}
		
		//Если вывод в массив
		if ($outputFormat == \'array\'){
			$result = $data;
		}else{
			$resTemp = [];
			
			//Дополнительные данные
			if (
				isset($placeholders) &&
				trim($placeholders) != \'\'
			){
				$placeholders = ddTools::encodedStringToArray($placeholders);
				//Unfold for arrays support (e. g. “{"somePlaceholder1": "test", "somePlaceholder2": {"a": "one", "b": "two"} }” => “[+somePlaceholder1+]”, “[+somePlaceholder2.a+]”, “[+somePlaceholder2.b+]”; “{"somePlaceholder1": "test", "somePlaceholder2": ["one", "two"] }” => “[+somePlaceholder1+]”, “[+somePlaceholder2.0+]”, “[somePlaceholder2.1]”)
				$placeholders = ddTools::unfoldArray($placeholders);
			}else{
				$placeholders = [];
			}
			
			//Если вывод просто в формате html
			if (
				$outputFormat == \'html\' ||
				$outputFormat == \'htmlarray\'
			){
				//Шаблоны колонок
				$colTpl = isset($colTpl) ? explode(
					\',\',
					$colTpl
				) : false;
				
				//Если шаблоны колонок заданы, но их не хватает
				if ($colTpl !== false){
					//Получим содержимое шаблонов
					foreach (
						$colTpl as
						$colTpl_itemNumber => $colTpl_itemValue
					){
						//Chunk content or inline template
						$colTpl[$colTpl_itemNumber] = $modx->getTpl($colTpl[$colTpl_itemNumber]);
					}
					
					if (($temp = count($data[0]) - count($colTpl)) > 0){
						//Дозабьём недостающие последним
						$colTpl = array_merge(
							$colTpl,
							array_fill(
								$temp - 1,
								$temp,
								$colTpl[count($colTpl) - 1]
							)
						);
					}
					
					$colTpl = str_replace(
						\'null\',
						\'\',
						$colTpl
					);
				}
				
				//Если задан шаблон строки
				if (isset($rowTpl)){
					//Chunk content or inline template
					$rowTpl = $modx->getTpl($rowTpl);
					
					//Перебираем строки
					foreach (
						$data as
						$rowNumber => $row
					){
						$resTemp[$rowNumber] = [
							//Запишем номер строки
							\'rowNumber.zeroBased\' => $rowNumber,
							\'rowNumber\' => $rowNumber + 1,
							//И общее количество элементов
							\'total\' => $total,
							\'resultTotal\' => $resultTotal
						];
						
						//Перебираем колонки
						foreach (
							$row as
							$columnNumber => $column
						){
							//Если нужно удалять пустые значения
							if (
								$removeEmptyCols &&
								!strlen($column)
							){
								$resTemp[$rowNumber][\'col\'.$columnNumber] = \'\';
							}else{
								//Если есть шаблоны значений колонок
								if (
									$colTpl !== false &&
									strlen($colTpl[$columnNumber]) > 0
								){
									$resTemp[$rowNumber][\'col\'.$columnNumber] = $modx->parseText(
										$colTpl[$columnNumber],
										array_merge(
											[
												\'val\' => $column,
												\'rowNumber.zeroBased\' => $resTemp[$rowNumber][\'rowNumber.zeroBased\'],
												\'rowNumber\' => $resTemp[$rowNumber][\'rowNumber\']
											],
											$placeholders
										)
									);
								}else{
									$resTemp[$rowNumber][\'col\'.$columnNumber] = $column;
								}
							}
						}
						
						$resTemp[$rowNumber] = $modx->parseText(
							$rowTpl,
							array_merge(
								$resTemp[$rowNumber],
								$placeholders
							)
						);
					}
				}else{
					foreach (
						$data as
						$rowNumber => $row
					){
						//Если есть шаблоны значений колонок
						if ($colTpl !== false){
							foreach (
								$row as
								$columnNumber => $column
							){
								if (
									$removeEmptyCols &&
									!strlen($column)
								){
									unset($row[$columnNumber]);
								}else if (strlen($colTpl[$columnNumber]) > 0){
									$row[$columnNumber] = $modx->parseText(
										$colTpl[$columnNumber],
										array_merge(
											[
												\'val\' => $column,
												\'rowNumber.zeroBased\' => $rowNumber,
												\'rowNumber\' => $rowNumber + 1
											],
											$placeholders
										)
									);
								}
							}
						}
						$resTemp[$rowNumber] = implode(
							$colGlue,
							$row
						);
					}
				}
				
				if ($outputFormat == \'html\'){
					$result = implode(
						$rowGlue,
						$resTemp
					);
				}else{
					$result = $resTemp;
				}
			//Если вывод в формате JSON
			}else if ($outputFormat == \'json\'){
				$resTemp = $data;
				
				//Если нужно выводить только одну колонку
				if (
					$columns != \'all\' &&
					count($columns) == 1
				){
					$resTemp = array_map(
						\'implode\',
						$resTemp
					);
				}
				
				//Если нужно получить какой-то конкретный элемент, а не все
				if ($totalRows == \'1\'){
					$result = json_encode($resTemp[$startRow]);
				}else{
					$result = json_encode($resTemp);
				}
				
				//Это чтобы MODX не воспринимал как вызов сниппета
				$result = strtr(
					$result,
					[
						\'[[\' => \'[ [\',
						\']]\' => \'] ]\'
					]
				);
			}
			
			//Если оборачивающий шаблон задан (и вывод не в массив), парсим его
			if (isset($outerTpl)){
				//Chunk content or inline template
				$outerTpl = $modx->getTpl($outerTpl);
				
				$resTemp = [];
				
				//Элемент массива \'result\' должен находиться самым первым, иначе дополнительные переданные плэйсхолдеры в тексте не найдутся! 
				$resTemp[\'result\'] = $result;
				
				//Преобразуем результат в одномерный массив
				$data = ddTools::unfoldArray($data);
				
				//Добавляем \'row\' и \'val\' к ключам
				foreach ($data as $rowNumber => $row){
					 $resTemp[preg_replace(
					 	\'/(\\d)\\.(\\d)/\',
					 	\'row$1.col$2\',
					 	$rowNumber
					 )] = $row;
				}
				
				$resTemp = array_merge(
					$resTemp,
					$placeholders
				);
				
				$resTemp[\'total\'] = $total;
				$resTemp[\'resultTotal\'] = $resultTotal;
				
				$result = $modx->parseText(
					$outerTpl,
					$resTemp
				);
			}
			
			//Если нужно URL-кодировать строку
			if ($urlencode){
				$result = rawurlencode($result);
			}
		}
	}
}

//Если надо, выводим в плэйсхолдер
if (isset($resultToPlaceholder)){
	$modx->setPlaceholder(
		$resultToPlaceholder,
		$result
	);
	
	$result = \'\';
}

return $result;';$p=&$this->pluginCache;$p['CodeMirror']='/**
 * CodeMirror
 *
 * JavaScript library that can be used to create a relatively pleasant editor interface based on CodeMirror 5.33 (released on 21-12-2017)
 *
 * @category    plugin
 * @version     1.5
 * @license     http://www.gnu.org/copyleft/gpl.html GNU Public License (GPL)
 * @package     evo
 * @internal    @events OnDocFormRender,OnChunkFormRender,OnModFormRender,OnPluginFormRender,OnSnipFormRender,OnTempFormRender,OnRichTextEditorInit
 * @internal    @modx_category Manager and Admin
 * @internal    @properties &theme=Theme;list;default,ambiance,blackboard,cobalt,eclipse,elegant,erlang-dark,lesser-dark,midnight,monokai,neat,night,one-dark,rubyblue,solarized,twilight,vibrant-ink,xq-dark,xq-light;default &darktheme=Dark Theme;list;default,ambiance,blackboard,cobalt,eclipse,elegant,erlang-dark,lesser-dark,midnight,monokai,neat,night,one-dark,rubyblue,solarized,twilight,vibrant-ink,xq-dark,xq-light;one-dark &fontSize=Font-size;list;10,11,12,13,14,15,16,17,18;14 &lineHeight=Line-height;list;1,1.1,1.2,1.3,1.4,1.5;1.3 &indentUnit=Indent unit;int;4 &tabSize=The width of a tab character;int;4 &lineWrapping=lineWrapping;list;true,false;true &matchBrackets=matchBrackets;list;true,false;true &activeLine=activeLine;list;true,false;false &emmet=emmet;list;true,false;true &search=search;list;true,false;false &indentWithTabs=indentWithTabs;list;true,false;true &undoDepth=undoDepth;int;200 &historyEventDelay=historyEventDelay;int;1250
 * @internal    @installset base
 * @reportissues https://github.com/evolution-cms/evolution/issues/
 * @documentation Official docs https://codemirror.net/doc/manual.html
 * @author      hansek from http://www.modxcms.cz
 * @author      update Mihanik71
 * @author      update Deesen
 * @author      update 64j
 * @lastupdate  08-01-2018
 */

$_CM_BASE = \'assets/plugins/codemirror/\';

$_CM_URL = $modx->config[\'site_url\'] . $_CM_BASE;

require(MODX_BASE_PATH. $_CM_BASE .\'codemirror.plugin.php\');';$p['CodeMirrorProps']='{"theme":"default","darktheme":"one-dark","fontSize":"14","lineHeight":"1.3","indentUnit":"4","tabSize":"4","lineWrapping":"true","matchBrackets":"true","activeLine":"false","emmet":"true","search":"false","indentWithTabs":"true","undoDepth":"200","historyEventDelay":"1250"}';$p['FileSource']='require MODX_BASE_PATH.\'assets/plugins/filesource/plugin.filesource.php\';';$p['Forgot Manager Login']='require MODX_BASE_PATH.\'assets/plugins/forgotmanagerlogin/plugin.forgotmanagerlogin.php\';';$p['ManagerManager']='/**
 * ManagerManager
 *
 * Customize the EVO Manager to offer bespoke admin functions for end users or manipulate the display of document fields in the manager.
 *
 * @category plugin
 * @version 0.6.3
 * @license http://creativecommons.org/licenses/GPL/2.0/ GNU Public License (GPL v2)
 * @internal @properties &remove_deprecated_tv_types_pref=Remove deprecated TV types;list;yes,no;yes &config_chunk=Configuration Chunk;text;mm_rules
 * @internal @events OnDocFormRender,OnDocFormPrerender,OnBeforeDocFormSave,OnDocFormSave,OnDocDuplicate,OnPluginFormRender,OnTVFormRender
 * @internal @modx_category Manager and Admin
 * @internal @installset base
 * @internal @legacy_names Image TV Preview, Show Image TVs
 * @reportissues https://github.com/DivanDesign/MODXEvo.plugin.ManagerManager/
 * @documentation README [+site_url+]assets/plugins/managermanager/readme.html
 * @documentation Official docs http://code.divandesign.biz/modx/managermanager
 * @link        Latest version http://code.divandesign.biz/modx/managermanager
 * @link        Additional tools http://code.divandesign.biz/modx
 * @link        Full changelog http://code.divandesign.biz/modx/managermanager/changelog
 * @author      Inspired by: HideEditor plugin by Timon Reinhard and Gildas; HideManagerFields by Brett @ The Man Can!
 * @author      DivanDesign studio http://www.DivanDesign.biz
 * @author      Nick Crossland http://www.rckt.co.uk
 * @author      Many others
 * @lastupdate  22/01/2018
 */

// Run the main code
include($modx->config[\'base_path\'].\'assets/plugins/managermanager/mm.inc.php\');';$p['ManagerManagerProps']='{"remove_deprecated_tv_types_pref":"yes","config_chunk":"mm_rules"}';$p['OutdatedExtrasCheck']='/**
 * OutdatedExtrasCheck
 *
 * Check for Outdated critical extras not compatible with EVO 1.4.6
 *
 * @category	plugin
 * @version     1.4.6
 * @license 	http://www.gnu.org/copyleft/gpl.html GNU Public License (GPL)
 * @package     evo
 * @author      Author: Nicola Lambathakis
 * @internal    @events OnManagerWelcomeHome
 * @internal    @properties &wdgVisibility=Show widget for:;menu;All,AdminOnly,AdminExcluded,ThisRoleOnly,ThisUserOnly;AdminOnly &ThisRole=Run only for this role:;string;;;(role id) &ThisUser=Run only for this user:;string;;;(username)
 * @internal    @modx_category Manager and Admin
 * @internal    @installset base
 * @internal    @disabled 0
 */

require MODX_BASE_PATH . \'assets/plugins/extrascheck/OutdatedExtrasCheck.plugin.php\';';$p['OutdatedExtrasCheckProps']='{"wdgVisibility":"AdminOnly"}';$p['TinyMCE4']='/**
 * TinyMCE4
 *
 * Javascript rich text editor
 *
 * @category    plugin
 * @version     4.7.4
 * @license     http://www.gnu.org/copyleft/gpl.html GNU Public License (GPL)
 * @internal    @properties &styleFormats=Custom Style Formats <b>RAW</b><br/><br/><ul><li>leave empty to use below block/inline formats</li><li>allows simple-format: <i>Title,cssClass|Title2,cssClass2</i></li><li>Also accepts full JSON-config as per TinyMCE4 docs / configure / content-formating / style_formats</li></ul>;textarea; &styleFormats_inline=Custom Style Formats <b>INLINE</b><br/><br/><ul><li>will wrap selected text with span-tag + css-class</li><li>simple-format only</li></ul>;textarea;InlineTitle,cssClass1|InlineTitle2,cssClass2 &styleFormats_block=Custom Style Formats <b>BLOCK</b><br/><br/><ul><li>will add css-class to selected block-element</li><li>simple-format only</li></ul>;textarea;BlockTitle,cssClass3|BlockTitle2,cssClass4 &customParams=Custom Parameters<br/><b>(Be careful or leave empty!)</b>;textarea; &entityEncoding=Entity Encoding;list;named,numeric,raw;named &entities=Entities;text; &pathOptions=Path Options;list;Site config,Absolute path,Root relative,URL,No convert;Site config &resizing=Advanced Resizing;list;true,false;false &disabledButtons=Disabled Buttons;text; &webTheme=Web Theme;test;webuser &webPlugins=Web Plugins;text; &webButtons1=Web Buttons 1;text;bold italic underline strikethrough removeformat alignleft aligncenter alignright &webButtons2=Web Buttons 2;text;link unlink image undo redo &webButtons3=Web Buttons 3;text; &webButtons4=Web Buttons 4;text; &webAlign=Web Toolbar Alignment;list;ltr,rtl;ltr &width=Width;text;100% &height=Height;text;400px &introtextRte=<b>Introtext RTE</b><br/>add richtext-features to "introtext";list;enabled,disabled;disabled &inlineMode=<b>Inline-Mode</b>;list;enabled,disabled;disabled &inlineTheme=<b>Inline-Mode</b><br/>Theme;text;inline &browser_spellcheck=<b>Browser Spellcheck</b><br/>At least one dictionary must be installed inside your browser;list;enabled,disabled;disabled &paste_as_text=<b>Force Paste as Text</b>;list;enabled,disabled;disabled
 * @internal    @events OnLoadWebDocument,OnParseDocument,OnWebPagePrerender,OnLoadWebPageCache,OnRichTextEditorRegister,OnRichTextEditorInit,OnInterfaceSettingsRender
 * @internal    @modx_category Manager and Admin
 * @internal    @legacy_names TinyMCE Rich Text Editor
 * @internal    @installset base
 * @logo        /assets/plugins/tinymce4/tinymce/logo.png
 * @reportissues https://github.com/extras-evolution/tinymce4-for-modx-evo
 * @documentation Plugin docs https://github.com/extras-evolution/tinymce4-for-modx-evo
 * @documentation Official TinyMCE4-docs https://www.tinymce.com/docs/
 * @author      Deesen
 * @lastupdate  2018-01-17
 */
if (!defined(\'MODX_BASE_PATH\')) { die(\'What are you doing? Get out of here!\'); }

require(MODX_BASE_PATH."assets/plugins/tinymce4/plugin.tinymce.inc.php");';$p['TinyMCE4Props']='{"styleFormats_inline":"InlineTitle,cssClass1|InlineTitle2,cssClass2","styleFormats_block":"BlockTitle,cssClass3|BlockTitle2,cssClass4","entityEncoding":"named","pathOptions":"Site config","resizing":"false","webTheme":"webuser","webButtons1":"bold italic underline strikethrough removeformat alignleft aligncenter alignright","webButtons2":"link unlink image undo redo","webAlign":"ltr","width":"100%","height":"400px","introtextRte":"disabled","inlineMode":"disabled","inlineTheme":"inline","browser_spellcheck":"disabled","paste_as_text":"disabled"}';$p['TransAlias']='require MODX_BASE_PATH.\'assets/plugins/transalias/plugin.transalias.php\';';$p['TransAliasProps']='{"table_name":"russian","char_restrict":"lowercase alphanumeric","remove_periods":"No","word_separator":"dash"}';$p['Updater']='require MODX_BASE_PATH.\'assets/plugins/updater/plugin.updater.php\';';$p['UpdaterProps']='{"version":"evolution-cms\\/evolution","wdgVisibility":"All","showButton":"AdminOnly","type":"tags","branch":"develop","stableOnly":"true"}';$e=&$this->pluginEvent;$e['OnBeforeDocFormSave']=array('ManagerManager');$e['OnBeforeManagerLogin']=array('Forgot Manager Login');$e['OnBeforePluginFormSave']=array('FileSource');$e['OnBeforeSnipFormSave']=array('FileSource');$e['OnChunkFormRender']=array('CodeMirror');$e['OnDocDuplicate']=array('ManagerManager');$e['OnDocFormPrerender']=array('ManagerManager');$e['OnDocFormRender']=array('ManagerManager','CodeMirror');$e['OnDocFormSave']=array('ManagerManager');$e['OnInterfaceSettingsRender']=array('TinyMCE4');$e['OnLoadWebDocument']=array('TinyMCE4');$e['OnLoadWebPageCache']=array('TinyMCE4');$e['OnManagerAuthentication']=array('Forgot Manager Login');$e['OnManagerLoginFormRender']=array('Forgot Manager Login');$e['OnManagerWelcomeHome']=array('OutdatedExtrasCheck','Updater');$e['OnModFormRender']=array('CodeMirror');$e['OnPageNotFound']=array('Updater');$e['OnParseDocument']=array('TinyMCE4');$e['OnPluginFormPrerender']=array('FileSource');$e['OnPluginFormRender']=array('FileSource','ManagerManager','CodeMirror');$e['OnRichTextEditorInit']=array('TinyMCE4','CodeMirror');$e['OnRichTextEditorRegister']=array('TinyMCE4');$e['OnSiteRefresh']=array('Updater');$e['OnSnipFormPrerender']=array('FileSource');$e['OnSnipFormRender']=array('CodeMirror','FileSource');$e['OnStripAlias']=array('TransAlias');$e['OnTempFormRender']=array('CodeMirror');$e['OnTVFormRender']=array('ManagerManager');$e['OnWebPagePrerender']=array('TinyMCE4');
